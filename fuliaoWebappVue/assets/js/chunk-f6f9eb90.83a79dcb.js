(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f6f9eb90"],{1398:function(e,o,s){},"9ec3":function(e,o,s){"use strict";s.r(o);var t=function(){var e=this,o=e.$createElement,s=e._self._c||o;return s("div",{ref:"scroller",staticClass:"video-one",on:{scroll:e.scroll}},[s("VideoHeader"),s("video",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],ref:"player",class:e.Quark||e.Baidu?"video-player scroll-video-player":e.scrollTop>20?"video-player scroll-video-player":"video-player",attrs:{src:e.videoInfo.url}}),s("div",{staticClass:"videopic",style:{background:"url("+e.videoInfo.cover+") no-repeat center",backgroundSize:"100%"}},[e.videoEnded?s("VideoHeadCover",{on:{replay:e.play,more:e.more}}):e._e(),s("RoomInfo",{attrs:{userInfo:e.userInfo,liveEnded:"1"},on:{toUserIndex:e.toUserIndex}}),s("Play",{staticClass:"play-video",on:{clicked:e.play}}),s("div",{staticClass:"video-des"},[e._v(e._s(e.videoInfo.name))]),s("a",{staticClass:"chat-with",on:{click:e.toAbout}},[e._v("和TA聊聊> ")]),s("div",{staticClass:"video-sociaty",on:{click:e.toAbout}},[s("Liked",{staticClass:"icon"}),s("div",{staticClass:"num"},[e._v(e._s(e.videoInfo.like_num))]),s("Comments",{staticClass:"icon"}),s("div",{staticClass:"num"},[e._v("123")]),s("Fowared",{staticClass:"icon"}),s("div",{staticClass:"num"},[e._v("456")]),s("Gift",{staticClass:"icon"}),s("div",{staticClass:"num"},[e._v("789")])],1)],1),s("SwiperNav",{staticClass:"swiper-nav",attrs:{navlist:e.navlist,activeClass:e.activeClass},on:{change:e.change}}),s("VideoRecommendSwiper",{attrs:{activeClass:e.activeClass,recommendVideoInfo:e.recommendVideoInfo},on:{slide:e.slider}}),s("Header",{staticClass:"header",attrs:{name:"返回首页",to:"SmallVideoList"}}),s("transition",{attrs:{name:"alert-app"}},[s("OpenInApp",{directives:[{name:"show",rawName:"v-show",value:e.scrollTop>20&&e.scrollTop<e.app,expression:"scrollTop > 20 && scrollTop < app"}]})],1)],1)},i=[],a=s("f499"),n=s.n(a),r=(s("55dd"),s("7f7f"),s("a4bb")),d=s.n(r),c=(s("4917"),s("37ed")),l=s("0ef6"),f=s("79ea"),u=s("0b44"),m=s("046c"),h=s("7b75"),v=s("c87d"),p=s("0872"),w=s("09d2"),I=s("f1d6"),S=s("5a71"),g=s("e476"),C={name:"VideoOne",components:{Play:c["a"],Liked:l["a"],Header:v["a"],Comments:f["a"],Fowared:u["a"],Gift:m["a"],RoomInfo:h["a"],VideoHeader:w["a"],VideoHeadCover:I["a"],SwiperNav:p["a"],OpenInApp:g["a"],VideoRecommendSwiper:S["a"]},data:function(){return{videoInfo:this.$route.params.videoInfo?this.$route.params.videoInfo:JSON.parse(window.sessionStorage.getItem("fuliaoVideoSession"))["".concat(window.history.state.time)].videoInfo,userInfo:{},scrollTop:this.$route.params.videoInfo?0:JSON.parse(window.sessionStorage.getItem("fuliaoVideoSession"))["".concat(window.history.state.time)].scrollTop,activeClass:this.$route.params.videoInfo?0:JSON.parse(window.sessionStorage.getItem("fuliaoVideoSession"))["".concat(window.history.state.time)].activeClass,recommendVideoInfo:{"热门视频":[],"最新视频":[]},show:!1,app:0,width:0,Quark:window.navigator.userAgent.match(/Quark/),Baidu:window.navigator.userAgent.match(/Baidu/),yinchengnuo:this.$store.state.yinchengnuo,watcherInfo:{},watcherInfoIndex:0,userInfoAlert:!1,videoEnded:!1,time:0}},computed:{navlist:function(){return d()(this.recommendVideoInfo)}},methods:{slider:function(e){this.activeClass=e},change:function(e){this.activeClass=e},play:function(){this.videoEnded=!1,this.show=!0,this.$refs.player.play()},scroll:function(){this.scrollTop=this.$refs.scroller.scrollTop},more:function(){this.$refs.scroller.scrollTop=this.width+50},toUserIndex:function(e){this.$router.push({name:"UserIndex"})},toAbout:function(){this.$router.push({name:"About"})}},mounted:function(){var e=this;this.$refs.scroller.scrollTop=this.scrollTop,this.width=document.body.offsetWidth,this.app=3*document.body.offsetWidth-this.$refs.scroller.offsetHeight+30,this.$refs.player.addEventListener("ended",function(){e.videoEnded=!0,e.show=!1})},created:function(){var e=this,o=function(){var o=window.sessionStorage.getItem("fuliaoVideoSession"),s=JSON.parse(o);e.$http.get("/smallvideoinfo?id=".concat(s["".concat(e.time)].videoInfo.feed_id)).then(function(o){var s={};s.name=o.data.data.feed_info.user.nick,s.userid=o.data.data.feed_info.user.id,s.userpic=o.data.data.feed_info.user.portrait,e.userInfo=s}),e.$http.get("/smallvideolist").then(function(o){var s=[];o.data.data.forEach(function(e){e.name&&s.push(e)}),s.sort(function(e,o){return o.like_num-e.like_num}),s.length%3&&(s.shift(),s.length%3&&s.shift()),e.recommendVideoInfo["热门视频"]=s.slice(0,12),e.recommendVideoInfo["最新视频"]=s.slice(12,24)})},s=window.sessionStorage.getItem("fuliaoVideoSession"),t=+new Date;this.time=t,history.replaceState({time:t},null);var i={videoInfo:this.videoInfo};if(s){var a=JSON.parse(s);a["".concat(t)]=i,window.sessionStorage.setItem("fuliaoVideoSession",n()(a))}else{var r={};r["".concat(t)]=i,window.sessionStorage.setItem("fuliaoVideoSession",n()(r))}if(this.$route.params.videoInfo)o();else{var d=JSON.parse(window.sessionStorage.getItem("fuliaoVideoSession"))["".concat(window.history.state.time)].recommendVideoInfo;d?(this.recommendVideoInfo["热门视频"]=d["热门视频"],this.recommendVideoInfo["最新视频"]=d["最新视频"]):o()}},beforeRouteLeave:function(e,o,s){var t=window.sessionStorage.getItem("fuliaoVideoSession"),i=JSON.parse(t);i["".concat(this.time)].recommendVideoInfo=this.recommendVideoInfo,i["".concat(this.time)].userInfo=this.userInfo,i["".concat(this.time)].activeClass=this.activeClass,i["".concat(this.time)].scrollTop=this.scrollTop,window.sessionStorage.setItem("fuliaoVideoSession",n()(i)),s()},meta:function(){return{title:this.userInfo.name?"".concat(this.userInfo.name,"的富聊小视频"):"富聊小视频"}}},V=C,y=(s("dcb9"),s("2877")),b=Object(y["a"])(V,t,i,!1,null,null,null);o["default"]=b.exports},dcb9:function(e,o,s){"use strict";var t=s("1398"),i=s.n(t);i.a}}]);