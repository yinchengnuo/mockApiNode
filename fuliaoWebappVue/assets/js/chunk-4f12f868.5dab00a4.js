(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f12f868"],{"02f4":function(e,t,n){var r=n("4588"),o=n("be13");e.exports=function(e){return function(t,n){var i,s,a=String(o(t)),c=r(n),l=a.length;return c<0||c>=l?e?"":void 0:(i=a.charCodeAt(c),i<55296||i>56319||c+1===l||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):i:e?a.slice(c,c+2):s-56320+(i-55296<<10)+65536)}}},"0390":function(e,t,n){"use strict";var r=n("02f4")(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},"0bfb":function(e,t,n){"use strict";var r=n("cb7c");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"214f":function(e,t,n){"use strict";n("b0c5");var r=n("2aba"),o=n("32e9"),i=n("79e5"),s=n("be13"),a=n("2b4c"),c=n("520a"),l=a("species"),u=!i(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),f=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var h=a(e),v=!i(function(){var t={};return t[h]=function(){return 7},7!=""[e](t)}),p=v?!i(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[l]=function(){return n}),n[h](""),!t}):void 0;if(!v||!p||"replace"===e&&!u||"split"===e&&!f){var d=/./[h],g=n(s,h,""[e],function(e,t,n,r,o){return t.exec===c?v&&!o?{done:!0,value:d.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),m=g[0],x=g[1];r(String.prototype,e,m),o(RegExp.prototype,h,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}}},4614:function(e,t,n){},"520a":function(e,t,n){"use strict";var r=n("0bfb"),o=RegExp.prototype.exec,i=String.prototype.replace,s=o,a="lastIndex",c=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e[a]||0!==t[a]}(),l=void 0!==/()??/.exec("")[1],u=c||l;u&&(s=function(e){var t,n,s,u,f=this;return l&&(n=new RegExp("^"+f.source+"$(?!\\s)",r.call(f))),c&&(t=f[a]),s=o.call(f,e),c&&s&&(f[a]=f.global?s.index+s[0].length:t),l&&s&&s.length>1&&i.call(s[0],n,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)}),s}),e.exports=s},"56c8":function(e,t,n){},"5f1b":function(e,t,n){"use strict";var r=n("23c6"),o=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var i=n.call(e,t);if("object"!==typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},"898c":function(e,t,n){"use strict";var r=n("56c8"),o=n.n(r);o.a},"8b79":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vidoe-chat-list"},[n("Header",{attrs:{name:"视频聊"}}),n("div",{ref:"scroller",staticClass:"video-chat-list-content",on:{scroll:e.scroll}},[n("div",{ref:"scrollerContent",staticClass:"wrapper"},[n("div",{staticClass:"header-pic",on:{click:e.toAbout}}),e._l(e.userInfo,function(t,r){return n("VideoChatListItem",{key:r,attrs:{userInfo:t,index:r},on:{toVideoChat:e.toVideoChat}})}),n("TextLoading",{directives:[{name:"show",rawName:"v-show",value:e.userInfo.length&&e.page,expression:"userInfo.length && page"}]}),n("a",{directives:[{name:"show",rawName:"v-show",value:!e.page,expression:"!page"}],staticClass:"watch-more",on:{click:e.toAbout}},[e._v("下载富聊APP, 和美女视频聊>>> ")])],2)]),n("ToTop",{directives:[{name:"show",rawName:"v-show",value:e.scrollTop>10,expression:"scrollTop > 10"}],staticClass:"to-top",on:{clicked:e.toTop}}),n("transition",{attrs:{name:"fade"},on:{"before-leave":e.beforeLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.userLeaved,expression:"userLeaved"}],staticClass:"user-leaved"},[e._v("该用户视频聊已接通，当前不在坐等状态了哦~")])])],1)},o=[],i=(n("a481"),n("c87d")),s=n("8a88"),a=n("ef40"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video-chat-list-item",on:{click:e.toVideoChat}},[n("img",{staticClass:"userpic",attrs:{src:e.userInfo.userpic,alt:""}}),n("span",{staticClass:"info"},[n("div",{staticClass:"top"},[n("span",{staticClass:"name"},[e._v(e._s(e.userInfo.name))]),n("span",{staticClass:"level"},[e._v(e._s(e.userInfo.faceLevel>e.userInfo.charmlevel?"v"+e.userInfo.faceLevel:"m"+e.userInfo.charmlevel))]),n("span",{staticClass:"sex-age"},[e._v(e._s(e.userInfo.sex?"♂·"+e.userInfo.year+"岁":"♀·"+e.userInfo.year+"岁"))])]),n("div",{staticClass:"bottom"},[n("span",{staticClass:"left"},[e._v(e._s(e.userInfo.videoenergy)+"能量/分钟")]),n("span",{staticClass:"right"},[e._v(e._s(e.userInfo.city))])])])])},l=[],u={name:"VideoChatListItem",props:["userInfo","index"],methods:{toVideoChat:function(){this.$emit("toVideoChat",this.index)}}},f=u,h=(n("fbb2"),n("2877")),v=Object(h["a"])(f,c,l,!1,null,"e967fb22",null),p=v.exports,d={name:"VideoChatList",components:{ToTop:a["a"],Header:i["a"],TextLoading:s["a"],VideoChatListItem:p},data:function(){return{userInfo:[],page:1,scrollTop:0,height:0,animationSize:234,getLock:!0,userLeaved:!1,nowUserInfo:{},nowIndex:0}},methods:{scroll:function(){this.scrollTop=this.$refs.scroller.scrollTop;var e=Math.floor(this.scrollTop/1500);this.animationSize=e?234*(e+1):234,this.$refs.scrollerContent.offsetHeight-this.height-this.$refs.scroller.scrollTop<20&&this.get()},toTop:function(){var e=this,t=0,n=function n(){e.$refs.scroller.scrollTop=e.scrollTop-=e.animationSize,e.scrollTop>e.animationSize?t=window.requestAnimationFrame(n):(e.$refs.scroller.scrollTop=e.scrollTop=0,window.cancelAnimationFrame(t))};t=window.requestAnimationFrame(n)},get:function(){var e=this;this.getLock&&(this.getLock=!1,this.page&&this.$http.get("/videochatlist?page=".concat(this.page)).then(function(t){e.userInfo=e.userInfo.concat(t.data.info),e.page++,t.data.info.length<1&&(e.page=0),e.getLock=!0}))},toVideoChat:function(e){var t=this;this.nowIndex=e,this.nowUserInfo=this.userInfo[e],this.$http.get(this.nowUserInfo.streamurl.replace("rtmp","http")+".m3u8").then(function(){t.$router.push({name:"VideoChatLive",params:{userInfo:t.nowUserInfo,index:t.nowIndex}})}).catch(function(){t.userLeaved=!0,setTimeout(function(){t.userLeaved=!1},1e3)})},beforeLeave:function(){this.userInfo.splice(this.nowIndex,1)},toAbout:function(){this.$router.push({name:"About"})}},created:function(){this.get()},mounted:function(){this.height=this.$refs.scroller.offsetHeight},beforeRouteLeave:function(e,t,n){this.scrollTop=this.$el.getElementsByClassName("video-chat-list-content")[0].scrollTop,n()},activated:function(){this.$el.getElementsByClassName("video-chat-list-content")[0].scrollTop=this.scrollTop,this.$route.params.index&&this.userInfo.splice(this.$route.params.index,1)},watch:{userInfo:function(e){e.length<8&&this.get()}},meta:function(){return{title:"更多精彩小视频-就在富聊APP"}}},g=d,m=(n("898c"),Object(h["a"])(g,r,o,!1,null,"ea91bef2",null));t["default"]=m.exports},a481:function(e,t,n){"use strict";var r=n("cb7c"),o=n("4bf8"),i=n("9def"),s=n("4588"),a=n("0390"),c=n("5f1b"),l=Math.max,u=Math.min,f=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,v=/\$([$&`']|\d\d?)/g,p=function(e){return void 0===e?e:String(e)};n("214f")("replace",2,function(e,t,n,d){return[function(r,o){var i=e(this),s=void 0==r?void 0:r[t];return void 0!==s?s.call(r,i,o):n.call(String(i),r,o)},function(e,t){var o=d(n,e,this,t);if(o.done)return o.value;var f=r(e),h=String(this),v="function"===typeof t;v||(t=String(t));var m=f.global;if(m){var x=f.unicode;f.lastIndex=0}var b=[];while(1){var w=c(f,h);if(null===w)break;if(b.push(w),!m)break;var I=String(w[0]);""===I&&(f.lastIndex=a(h,i(f.lastIndex),x))}for(var C="",T=0,$=0;$<b.length;$++){w=b[$];for(var y=String(w[0]),L=l(u(s(w.index),h.length),0),_=[],k=1;k<w.length;k++)_.push(p(w[k]));var A=w.groups;if(v){var E=[y].concat(_,L,h);void 0!==A&&E.push(A);var S=String(t.apply(void 0,E))}else S=g(y,h,L,_,A,t);L>=T&&(C+=h.slice(T,L)+S,T=L+y.length)}return C+h.slice(T)}];function g(e,t,r,i,s,a){var c=r+e.length,l=i.length,u=v;return void 0!==s&&(s=o(s),u=h),n.call(a,u,function(n,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(c);case"<":a=s[o.slice(1,-1)];break;default:var u=+o;if(0===u)return n;if(u>l){var h=f(u/10);return 0===h?n:h<=l?void 0===i[h-1]?o.charAt(1):i[h-1]+o.charAt(1):n}a=i[u-1]}return void 0===a?"":a})}})},b0c5:function(e,t,n){"use strict";var r=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},fbb2:function(e,t,n){"use strict";var r=n("4614"),o=n.n(r);o.a}}]);