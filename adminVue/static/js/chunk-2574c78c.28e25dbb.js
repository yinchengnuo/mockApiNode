(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2574c78c"],{1719:function(e,t,a){},5349:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-input",{staticStyle:{"margin-bottom":"8px",width:"240px"},attrs:{placeholder:"输入部门名称进行过滤",maxlength:"24",size:"mini"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),a("el-button",{staticStyle:{"margin-left":"4px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.dialog.show()}}},[e._v("添加组织")]),a("div",{staticClass:"custom-table border"},[e._m(0),a("el-tree",{ref:"tree",staticClass:"bl",attrs:{draggable:"",data:e.tree,"default-expand-all":!0,"filter-node-method":e.filterNode},on:{"node-drop":e.treeDrop},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.node,i=t.data;return[a("div",{staticClass:"custom-tree-node"},[a("div",{staticClass:"item dept br bb"},[a("div",{staticClass:"dept",style:{"padding-left":24*(l.level-1)+36+"px"}},[e._v(e._s(l.label))])]),a("div",{staticClass:"item br bb"},[e._v(e._s(i.leader))]),a("div",{staticClass:"item br bb"},[e._v(e._s(i.phone))]),a("div",{staticClass:"item br bb",on:{click:function(e){e.stopPropagation()}}},[[a("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.dialog.show(l,i)}}},[e._v("修改")]),a("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(t){return e.dialog.show(l)}}},[e._v("添加子部门")]),a("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.delTree(l)}}},[e._v("删除")])]],2)])]}}])})],1),a("el-dialog",{attrs:{width:"456px",title:e.dialog.title,visible:e.dialog.visible,"destroy-on-close":!0},on:{"update:visible":function(t){return e.$set(e.dialog,"visible",t)}}},[e.dialog.title.includes("部门")?a("el-form",{ref:e.dialog.refName,attrs:{"label-width":"98px",model:e.dialog.data,rules:e.dialog.rules1,"validate-on-rule-change":!1}},[a("el-form-item",{attrs:{label:"部门名称",prop:"label"}},[a("el-input",{attrs:{maxlength:"12",placeholder:"请输入部门名称"},model:{value:e.dialog.data.label,callback:function(t){e.$set(e.dialog.data,"label",t)},expression:"dialog.data.label"}})],1),a("el-form-item",{attrs:{label:"部门负责人",prop:"leader"}},[a("el-input",{attrs:{maxlength:"20",placeholder:"请输入部门负责人"},model:{value:e.dialog.data.leader,callback:function(t){e.$set(e.dialog.data,"leader",t)},expression:"dialog.data.leader"}})],1),a("el-form-item",{attrs:{label:"联系方式",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入部门联系方式",maxlength:"11"},model:{value:e.dialog.data.phone,callback:function(t){e.$set(e.dialog.data,"phone",t)},expression:"dialog.data.phone"}})],1)],1):a("el-form",{ref:e.dialog.refName,attrs:{"label-width":"98px",model:e.dialog.data,rules:e.dialog.rules2,"validate-on-rule-change":!1}},[a("el-form-item",{attrs:{label:"组织名称",prop:"label"}},[a("el-input",{attrs:{maxlength:"12",placeholder:"请输入组织名称"},model:{value:e.dialog.data.label,callback:function(t){e.$set(e.dialog.data,"label",t)},expression:"dialog.data.label"}})],1),a("el-form-item",{attrs:{label:"组织负责人",prop:"leader"}},[a("el-input",{attrs:{maxlength:"20",placeholder:"请输入组织负责人"},model:{value:e.dialog.data.leader,callback:function(t){e.$set(e.dialog.data,"leader",t)},expression:"dialog.data.leader"}})],1),a("el-form-item",{attrs:{label:"联系方式",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入组织联系方式",maxlength:"11"},model:{value:e.dialog.data.phone,callback:function(t){e.$set(e.dialog.data,"phone",t)},expression:"dialog.data.phone"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialog.comfirm(e.$refs,e.tree)}}},[e._v("确 定")])],1)],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"header bt bl"},[a("div",{staticClass:"item br bb"},[e._v("部门")]),a("div",{staticClass:"item br bb"},[e._v("负责人")]),a("div",{staticClass:"item br bb"},[e._v("联系方式")]),a("div",{staticClass:"item br bb"},[e._v("操作")])])}],r=(a("4de4"),a("caad"),a("c975"),a("a434"),a("2532"),a("5530")),n=(a("96cf"),a("1da1")),o=a("6a9d"),d=a("2c01"),s={name:"Department",props:{},data:function(){return{filterText:"",dialog:{title:"",node:null,visible:!1,refName:"dialogFrom",data:{id:"",label:"",leader:"",phone:""},show:function(e,t){e?(this.node=e,t?(this.title="修改部门信息",Object.assign(this.data,t)):(this.title="新增子部门（".concat(e.data.label,"）"),Object.assign(this.data,{id:"",label:"",leader:"",phone:""}))):(this.title="新增组织",Object.assign(this.data,{id:"",label:"",leader:"",phone:""})),this.visible=!0},comfirm:function(e,t){var a=this;e[this.refName].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(l){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!l){e.next=16;break}if(!a.title.includes("部门")){e.next=12;break}if(!a.title.includes("新增子部门")){e.next=8;break}return a.node.data.children?a.node.data.children.push(Object(r["a"])(Object(r["a"])({},a.data),{},{id:Date.now()})):a.node.data.children=[Object(r["a"])(Object(r["a"])({},a.data),{},{id:Date.now()})],e.next=6,d["default"].$request(Object(o["b"])({tree:a.node.store.root.data}));case 6:e.next=10;break;case 8:Object.assign(a.node.data,a.data),d["default"].$request(Object(o["b"])({tree:a.node.store.root.data}));case 10:e.next=15;break;case 12:return t.push({id:Date.now(),label:a.data.label,leader:a.data.leader,phone:a.data.phone}),e.next=15,d["default"].$request(Object(o["b"])({tree:t}));case 15:a.visible=!1;case 16:return e.abrupt("return");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},rules1:{label:[{required:!0,message:"请输入部门名称",trigger:"blur"}],leader:[{required:!0,message:"请输入部门负责人",trigger:"blur"}],phone:[{required:!0,message:"请输入部门联系方式",trigger:"blur"},{min:11,max:11,message:"请输入手机号",trigger:"blur"}]},rules2:{label:[{required:!0,message:"请输入组织名称",trigger:"blur"}],leader:[{required:!0,message:"请输入组织负责人",trigger:"blur"}],phone:[{required:!0,message:"请输入组织联系方式",trigger:"blur"},{min:11,max:11,message:"请输入手机号",trigger:"blur"}]}},tree:[]}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},mounted:function(){this.getTree()},methods:{filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},getTree:function(){var e=this;this.$request(Object(o["a"])(),(function(t){e.tree=t}))},treeDrop:function(){d["default"].$request(Object(o["b"])({tree:this.tree}))},delTree:function(e){var t=this;this.$confirm("确定要删除".concat(e.label,"？"),"确定操作",{type:"warning"}).then((function(){e.parent.data.children?e.parent.data.children.splice(e.parent.data.children.indexOf(e.data),1):e.parent.data.splice(e.parent.data.indexOf(e.data),1),d["default"].$request(Object(o["b"])({tree:t.tree}))}))}}},c=s,u=(a("9bb0"),a("2877")),b=Object(u["a"])(c,l,i,!1,null,"598f1a8f",null);t["default"]=b.exports},"6a9d":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n}));var l=a("b775"),i={api_getDept:"/admin/dept/tree",api_updateDept:"/admin/dept/update"},r=function(e){return l["b"].get(i.api_getDept,{params:e})},n=function(e){return l["b"].post(i.api_updateDept,e)}},"9bb0":function(e,t,a){"use strict";var l=a("1719"),i=a.n(l);i.a}}]);