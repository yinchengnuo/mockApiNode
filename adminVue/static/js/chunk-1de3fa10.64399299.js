(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1de3fa10"],{"6a9d":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return r}));var A=a("b775"),n={api_getDept:"/admin/dept/tree",api_updateDept:"/admin/dept/update"},i=function(t){return A["b"].get(n.api_getDept,{params:t})},r=function(t){return A["b"].post(n.api_updateDept,t)}},7125:function(t,e,a){"use strict";var A=a("b91c"),n=a.n(A);n.a},"8d55":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return o})),a.d(e,"d",(function(){return l}));var A=a("b775"),n={api_getRole:"/admin/role/all",api_delRole:"/admin/role/del",api_addRole:"/admin/role/add",api_updateRole:"/admin/role/update"},i=function(t){return A["b"].post(n.api_addRole,t)},r=function(t){return A["b"].get(n.api_getRole,{params:t})},o=function(t){return A["b"].get(n.api_delRole,{params:t})},l=function(t){return A["b"].post(n.api_updateRole,t)}},b91c:function(t,e,a){},e378:function(t,e,a){"use strict";a.r(e);var A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PageAccountManage"},[a("div",{staticClass:"left"},[a("el-input",{attrs:{size:"mini",placeholder:"输入部门名称进行过滤"},model:{value:t.filterText,callback:function(e){t.filterText="string"===typeof e?e.trim():e},expression:"filterText"}}),a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:t.tree,"default-expand-all":"","expand-on-click-node":!1,"filter-node-method":t.filterNode},on:{"node-click":t.switchDept}})],1),a("div",{staticClass:"right"},[a("el-button",{staticStyle:{"margin-bottom":"8px"},attrs:{type:"primary",size:"mini"},on:{click:t.handleAddAccount}},[t._v("添加账号")]),a("el-table",{attrs:{data:t.list,border:""}},[a("el-table-column",{attrs:{align:"center",prop:"avatar",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row,A=e.avatar,n=e.username;return[a("img",{staticClass:"avatar",attrs:{src:A,alt:n}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"username",label:"名称"}}),a("el-table-column",{attrs:{align:"center",prop:"deptname",label:"部门"}}),a("el-table-column",{attrs:{align:"center",prop:"rolename",label:"角色"},scopedSlots:t._u([{key:"default",fn:function(e){var A=e.row.rolename;return[a("router-link",{attrs:{to:{name:"AdminRole",params:{rolename:A}}}},[a("el-link",{attrs:{type:"primary"}},[t._v(t._s(A))])],1)]}}])}),a("el-table-column",{attrs:{align:"center",prop:"createname",label:"创建人"}}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.handleEditAccount(e.row)}}},[t._v("修改账号信息")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.handleDeleteAccount(e.row)}}},[t._v("删除账号")])]}}])})],1),a("Pagination",{attrs:{total:t.page.total,page:t.page.page,limit:t.page.limit},on:{pagination:t.pagination}}),a("el-dialog",{attrs:{width:"666px",visible:t.dialogVisible,"destroy-on-close":!0,title:"add"===t.dialogType?"添加账号":"编辑账号"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"dialog-form",attrs:{model:t.account,"label-width":"88px","label-position":"left",inline:"",rules:t.rules}},[a("div",{staticStyle:{"text-align":"center","margin-bottom":"24px"}},[a("el-avatar",{directives:[{name:"img",rawName:"v-img.base64",value:function(e){var a=e[0];return t.account.avatar=a},expression:"([avatar]) => account.avatar = avatar",modifiers:{base64:!0}}],attrs:{size:66,src:t.account.avatar}}),a("div",[t._v("点击头像选择")])],1),a("el-form-item",{attrs:{label:"用户名称",prop:"username"}},[a("el-input",{attrs:{maxlength:"16",placeholder:"请输入用户名称"},model:{value:t.account.username,callback:function(e){t.$set(t.account,"username","string"===typeof e?e.trim():e)},expression:"account.username"}})],1),a("el-form-item",{attrs:{label:"归属部门",prop:"deptID"}},[a("treeselect",{staticStyle:{width:"200px"},attrs:{options:t.tree,"show-count":!0,"disable-branch-nodes":!0,placeholder:"请选择归属部门"},on:{select:function(e){var a=e.label;return t.account.deptname=a}},model:{value:t.account.deptID,callback:function(e){t.$set(t.account,"deptID","string"===typeof e?e.trim():e)},expression:"account.deptID"}})],1),a("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[a("el-input",{staticStyle:{width:"185px"},attrs:{maxlength:"16",type:"password","show-password":"",placeholder:"请输入用户密码"},model:{value:t.account.password,callback:function(e){t.$set(t.account,"password","string"===typeof e?e.trim():e)},expression:"account.password"}})],1),a("el-form-item",{attrs:{label:"用户角色",prop:"roleID"}},[a("el-select",{attrs:{placeholder:"请选择用户角色"},model:{value:t.account.roleID,callback:function(e){t.$set(t.account,"roleID","string"===typeof e?e.trim():e)},expression:"account.roleID"}},t._l(t.roleList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.rolename,value:t.roleID}})})),1)],1)],1),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmAccount}},[t._v("确定")])],1)],1)],1)])},n=[],i=(a("4de4"),a("4160"),a("c975"),a("159b"),a("96cf"),a("1da1")),r=a("3835"),o="data:image/jpg;base64,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",l=a("6a9d"),c=a("8d55"),s=a("ca17"),u=a.n(s),d=(a("542c"),a("b775")),p={api_getAcc:"/admin/user/all",api_delAcc:"/admin/user/del",api_addAcc:"/admin/user/add",api_updateAcc:"/admin/user/update"},g=function(t){return d["b"].post(p.api_addAcc,t)},f=function(t){return d["b"].post(p.api_updateAcc,t)},m=function(t){return d["b"].get(p.api_getAcc,{params:t})},b=function(t){return d["b"].get(p.api_delAcc,{params:t})},v={avatar:o,userID:"",roleID:"",deptID:null,deptname:"",password:"",username:""},y={name:"PageAccountManage",components:{Treeselect:u.a},props:{},data:function(){return{account:v,tree:[],filterText:"",list:[],roleList:[],dialogType:"",dialogVisible:!1,deptIDs:"",page:{page:1,total:0,limit:10},rules:{username:[{required:!0,message:"请输入用户名称",trigger:"blur"}],deptID:[{required:!0,message:"请选择归属部门",trigger:"blur"}],password:[{required:!0,message:"请输入用户密码",trigger:"blur"}],roleID:[{required:!0,message:"请选择用户角色",trigger:"blur"}]}}},watch:{filterText:function(t){this.$refs.tree.filter(t)}},mounted:function(){var t=this;this.$request(Object(l["a"])(),(function(e){t.tree=e})),this.getAccountRoleDept()},methods:{switchDept:function(t){var e="",a=function t(a){a.forEach((function(a){a.children?t(a.children):e+=e?",".concat(a.id):a.id}))};a([t]),this.deptIDs=e,this.page.page=1,this.getAccount()},pagination:function(t){var e=t.page,a=t.limit;this.page.page=e,this.page.limit=a,this.getAccount()},filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},getAccount:function(){var t=this;this.$request(m({dept:this.deptIDs,page:this.page.page,limit:this.page.limit}),(function(e){t.list=e.list,t.page.total=e.total}))},getAccountRoleDept:function(){var t=this;this.$request([m({dept:this.deptIDs,page:this.page.page,limit:this.page.limit}),Object(c["c"])(),Object(l["a"])()],(function(e){var a=Object(r["a"])(e,3),A=a[0],n=a[1],i=a[2];t.tree=i,t.list=A.list,t.page.total=A.total,t.roleList=n.list}))},handleAddAccount:function(){this.account=Object.assign({},v),this.dialogType="add",this.dialogVisible=!0},handleEditAccount:function(t){this.account=Object.assign({},t),this.dialogType="edit",this.dialogVisible=!0},confirmAccount:function(){var t=this;this.$refs["dialog-form"].validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var A,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=11;break}if(t.__loading=t.$loading(),!(t.account.avatar.length/1024>100)){e.next=9;break}return e.next=5,t.$compression(t.account.avatar,100,6);case 5:A=e.sent,n=A.afterSrc,t.account.avatar=n,console.log(t.account.avatar);case 9:t.__loading.close(),"add"===t.dialogType?t.$request(g(t.account),(function(e){t.$notify.success({title:"添加成功",message:"用户名称: "+t.account.username}),t.getAccountRoleDept(),t.dialogVisible=!1}),{endStillLoading:!0}):t.$request(f(t.account),(function(e){t.$notify.success({title:"编辑成功",message:"用户名称: "+t.account.username}),t.getAccountRoleDept(),t.dialogVisible=!1}),{endStillLoading:!0});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},handleDeleteAccount:function(t){var e=this,a=t.userID;this.$confirm("确定要删除当前账号？","确定操作",{type:"warning"}).then((function(){e.$request(b({userID:a}),(function(t){e.$message.success("删除成功"),e.getAccountRoleDept()}),{endStillLoading:!0})})).catch((function(t){return t}))}}},h=y,R=(a("7125"),a("2877")),j=Object(R["a"])(h,A,n,!1,null,"2e19ceba",null);e["default"]=j.exports}}]);