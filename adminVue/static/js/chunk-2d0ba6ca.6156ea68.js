(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ba6ca"],{"36c4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e.user?a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6,xs:24}},[a("user-card",{attrs:{user:{name:e.name,role:e.role,dept:e.dept,avatar:e.avatar}}})],1),a("el-col",{attrs:{span:18,xs:24}},[a("el-card",[a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"待办事项",name:"待办事项"}},[a("todo")],1),a("el-tab-pane",{attrs:{label:"修改密码",name:"修改密码"}},[a("password")],1)],1)],1)],1)],1)],1):e._e()])},s=[],n=a("5530"),o=a("2f62"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"todo"},[a("tinymce",{attrs:{height:456},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),a("el-button",{staticStyle:{"margin-top":"8px"},attrs:{type:"danger"},on:{click:function(t){e.content="",e.save()}}},[e._v("清空")]),a("el-button",{staticStyle:{"margin-top":"8px"},attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)},i=[],c=a("8256"),u=a("6af6"),m={components:{Tinymce:c["a"]},data:function(){return{content:""}},mounted:function(){this.content=this.$store.getters.todo},methods:{save:function(){var e=this;this.$request(Object(u["f"])({todo:this.content}),(function(){e.$message.success("保存成功"),e.$store.dispatch("user/getInfo")}))}}},p=m,d=a("2877"),f=Object(d["a"])(p,l,i,!1,null,null,null),v=f.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e._v("个人信息")]),a("img",{directives:[{name:"img",rawName:"v-img.base64",value:e.switchAvatar,expression:"switchAvatar",modifiers:{base64:!0}}],staticStyle:{display:"block",width:"120px",height:"120px",margin:"0 auto","border-radius":"50%"},attrs:{src:e.user.avatar}}),a("div",{staticClass:"text-center",staticStyle:{margin:"8px","font-size":"24px"}},[e._v(e._s(e.user.name))]),a("div",{staticClass:"text-center",staticStyle:{margin:"8px","font-size":"36px"}},[e._v(e._s(e._f("uppercaseFirst")(e.user.role)))]),a("div",{staticClass:"text-center",staticStyle:{margin:"8px","font-size":"24px"}},[e._v(e._s(e.user.dept))])])},b=[],h=a("3835"),g=(a("96cf"),a("1da1")),x={props:{user:{type:Object,default:function(){return{name:"",role:"",dept:"",avatar:""}}}},methods:{switchAvatar:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=Object(h["a"])(e,1),s=r[0],a.next=3,t.$compression(s,200);case 3:s=a.sent.afterSrc,t.$request(Object(u["a"])({avatar:s}),(function(){t.$store.dispatch("user/getInfo")}));case 5:case"end":return a.stop()}}),a)})))()}}},y=x,_=Object(d["a"])(y,w,b,!1,null,null,null),$=_.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"password"},[a("el-form",{ref:"form",staticStyle:{width:"345px"},attrs:{model:e.form,rules:e.rules,"label-width":"123px"}},[a("el-form-item",{attrs:{label:"旧密码：",prop:"old"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入旧密码",maxlength:"16","show-password":"",autofocus:""},model:{value:e.form.old,callback:function(t){e.$set(e.form,"old",t)},expression:"form.old"}})],1),a("el-form-item",{attrs:{label:"新密码：",prop:"new1"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入新密码",maxlength:"16","show-password":""},model:{value:e.form.new1,callback:function(t){e.$set(e.form,"new1",t)},expression:"form.new1"}})],1),a("el-form-item",{attrs:{label:"重复新密码：",prop:"new2"}},[a("el-input",{attrs:{type:"password",placeholder:"请再次输入新密码",maxlength:"16","show-password":""},model:{value:e.form.new2,callback:function(t){e.$set(e.form,"new2",t)},expression:"form.new2"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("修改密码")])],1)],1)],1)},j=[],O={data:function(){return{form:{old:"",new1:"",new2:""},rules:{old:[{required:!0,message:"请输入旧密码",trigger:"blur"}],new1:[{required:!0,message:"请输入新密码",trigger:"blur"}],new2:[{required:!0,message:"请再次输入新密码",trigger:"blur"}]}}},methods:{onSubmit:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.form.new1===e.form.new2?e.$request(Object(u["e"])({oldpsw:e.form.old,newpsw:e.form.new}),(function(){e.form.old=e.form.new1=e.form.new2="",e.$message.success("修改成功")})):e.$message.error("两次输入的新密码不一致"))}))}}},S=O,C=Object(d["a"])(S,k,j,!1,null,null,null),q=C.exports,T={name:"Profile",components:{UserCard:$,Todo:v,Password:q},data:function(){return{user:{},activeTab:"待办事项"}},computed:Object(n["a"])({},Object(o["b"])(["name","role","dept","avatar"]))},E=T,z=Object(d["a"])(E,r,s,!1,null,null,null);t["default"]=z.exports}}]);