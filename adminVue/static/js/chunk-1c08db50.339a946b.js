(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c08db50"],{"18d0":function(e,t,a){},"6a9d":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));var A=a("b775"),n={api_getDept:"/admin/dept/tree",api_updateDept:"/admin/dept/update"},r=function(e){return A["b"].get(n.api_getDept,{params:e})},i=function(e){return A["b"].post(n.api_updateDept,e)}},"8d55":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return l}));var A=a("b775"),n={api_getRole:"/admin/role/all",api_delRole:"/admin/role/del",api_addRole:"/admin/role/add",api_updateRole:"/admin/role/update"},r=function(e){return A["b"].post(n.api_addRole,e)},i=function(e){return A["b"].get(n.api_getRole,{params:e})},o=function(e){return A["b"].get(n.api_delRole,{params:e})},l=function(e){return A["b"].post(n.api_updateRole,e)}},c24d:function(e,t,a){"use strict";var A=a("18d0"),n=a.n(A);n.a},e378:function(e,t,a){"use strict";a.r(t);var A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"PageAccountManage"},[a("div",{staticClass:"left"},[a("el-input",{attrs:{size:"mini",placeholder:"输入部门名称进行过滤"},model:{value:e.filterText,callback:function(t){e.filterText="string"===typeof t?t.trim():t},expression:"filterText"}}),a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.tree,"default-expand-all":"","expand-on-click-node":!1,"filter-node-method":e.filterNode},on:{"node-click":e.switchDept}})],1),a("div",{staticClass:"right"},[a("el-button",{staticStyle:{"margin-bottom":"8px"},attrs:{type:"primary",size:"mini"},on:{click:e.handleAddAccount}},[e._v("添加账号")]),a("el-table",{attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{align:"center",prop:"avatar",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row,A=t.avatar,n=t.username;return[a("img",{staticClass:"avatar",attrs:{src:A,alt:n}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"username",label:"名称"}}),a("el-table-column",{attrs:{align:"center",prop:"deptname",label:"部门"}}),a("el-table-column",{attrs:{align:"center",prop:"rolename",label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){var A=t.row.rolename;return[a("router-link",{attrs:{to:{name:"AdminRole",params:{rolename:A}}}},[a("el-link",{attrs:{type:"primary"}},[e._v(e._s(A))])],1)]}}])}),a("el-table-column",{attrs:{align:"center",prop:"createname",label:"创建人"}}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleEditAccount(t.row)}}},[e._v("修改账号信息")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.handleDeleteAccount(t.row)}}},[e._v("删除账号")])]}}])})],1),a("Pagination",{attrs:{total:e.page.total,limit:e.page.limit},on:{pagination:e.pagination}}),a("el-dialog",{attrs:{width:"666px",visible:e.dialogVisible,"destroy-on-close":!0,title:"add"===e.dialogType?"添加账号":"编辑账号"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dialog-form",attrs:{model:e.account,"label-width":"88px","label-position":"left",inline:"",rules:e.rules}},[a("div",{staticStyle:{"text-align":"center","margin-bottom":"24px"}},[a("el-avatar",{directives:[{name:"img",rawName:"v-img.base64",value:function(t){var a=t[0];return e.account.avatar=a},expression:"([avatar]) => account.avatar = avatar",modifiers:{base64:!0}}],attrs:{size:66,src:e.account.avatar}}),a("div",[e._v("点击头像选择")])],1),a("el-form-item",{attrs:{label:"用户名称",prop:"username"}},[a("el-input",{attrs:{maxlength:"12",placeholder:"请输入用户名称"},model:{value:e.account.username,callback:function(t){e.$set(e.account,"username","string"===typeof t?t.trim():t)},expression:"account.username"}})],1),a("el-form-item",{attrs:{label:"归属部门",prop:"deptID"}},[a("treeselect",{staticStyle:{width:"200px"},attrs:{options:e.tree,"show-count":!0,"disable-branch-nodes":!0,placeholder:"请选择归属部门"},on:{select:function(t){var a=t.label;return e.account.deptname=a}},model:{value:e.account.deptID,callback:function(t){e.$set(e.account,"deptID","string"===typeof t?t.trim():t)},expression:"account.deptID"}})],1),a("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[a("el-input",{staticStyle:{width:"185px"},attrs:{maxlength:"16",type:"password","show-password":"",placeholder:"请输入用户密码"},model:{value:e.account.password,callback:function(t){e.$set(e.account,"password","string"===typeof t?t.trim():t)},expression:"account.password"}})],1),a("el-form-item",{attrs:{label:"用户角色",prop:"roleID"}},[a("el-select",{attrs:{placeholder:"请选择用户角色"},model:{value:e.account.roleID,callback:function(t){e.$set(e.account,"roleID","string"===typeof t?t.trim():t)},expression:"account.roleID"}},e._l(e.roleList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.rolename,value:e.roleID}})})),1)],1)],1),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmAccount}},[e._v("确定")])],1)],1)],1)])},n=[],r=(a("4de4"),a("c975"),a("96cf"),a("1da1")),i=a("3835"),o="data:image/jpg;base64,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",l=a("6a9d"),c=a("8d55"),s=a("ca17"),u=a.n(s),d=(a("542c"),a("b775")),p={api_getAcc:"/admin/user/all",api_delAcc:"/admin/user/del",api_addAcc:"/admin/user/add",api_updateAcc:"/admin/user/update"},f=function(e){return d["b"].post(p.api_addAcc,e)},m=function(e){return d["b"].post(p.api_updateAcc,e)},g=function(e){return d["b"].get(p.api_getAcc,{params:e})},b=function(e){return d["b"].get(p.api_delAcc,{params:e})},v={avatar:o,userID:"",roleID:"",deptID:null,deptname:"",password:"",username:""},y={name:"PageAccountManage",components:{Treeselect:u.a},props:{},data:function(){return{account:v,tree:[],filterText:"",list:[],roleList:[],dialogType:"",dialogVisible:!1,deptID:"1",page:{page:1,total:0,limit:20},rules:{username:[{required:!0,message:"请输入用户名称",trigger:"blur"}],deptID:[{required:!0,message:"请选择归属部门",trigger:"blur"}],password:[{required:!0,message:"请输入用户密码",trigger:"blur"}],roleID:[{required:!0,message:"请选择用户角色",trigger:"blur"}]}}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},mounted:function(){var e=this;this.$request(Object(l["a"])(),(function(t){e.tree=t})),this.getAccountRoleDept()},methods:{switchDept:function(e){var t=e.id;console.log(t)},pagination:function(){console.log(123)},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},getAccountRoleDept:function(){var e=this;this.$request([g({dept:this.deptID,page:this.page.page,limit:this.page.limit}),Object(c["c"])(),Object(l["a"])()],(function(t){var a=Object(i["a"])(t,3),A=a[0],n=a[1],r=a[2];e.tree=r,e.list=A.list,e.roleList=n.list}))},handleAddAccount:function(){this.account=Object.assign({},v),this.dialogType="add",this.dialogVisible=!0},handleEditAccount:function(e){this.account=Object.assign({},e),this.dialogType="edit",this.dialogVisible=!0},confirmAccount:function(){var e=this;this.$refs["dialog-form"].validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(a){var A,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=12;break}if(e.__loading=e.$loading(),!(e.account.avatar.length/1024>100)){t.next=9;break}return t.next=5,e.$compression(e.account.avatar,100,6);case 5:A=t.sent,n=A.afterSrc,e.account.avatar=n,console.log(e.account.avatar);case 9:e.$message.info("图片压缩完毕"),e.__loading.close(),"add"===e.dialogType?e.$request(f(e.account),(function(t){e.$notify.success({title:"添加成功",message:"用户名称: "+e.account.username}),e.getAccountRoleDept(),e.dialogVisible=!1}),{endStillLoading:!0}):e.$request(m(e.account),(function(t){e.$notify.success({title:"编辑成功",message:"用户名称: "+e.account.username}),e.getAccountRoleDept(),e.dialogVisible=!1}),{endStillLoading:!0});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleDeleteAccount:function(e){var t=this,a=e.userID;this.$confirm("确定要删除当前账号？","确定操作",{type:"warning"}).then((function(){t.$request(b({userID:a}),(function(e){t.$message.success("删除成功"),t.getAccountRoleDept()}),{endStillLoading:!0})})).catch((function(e){return e}))}}},R=y,j=(a("c24d"),a("2877")),k=Object(j["a"])(R,A,n,!1,null,"5476c82c",null);t["default"]=k.exports}}]);