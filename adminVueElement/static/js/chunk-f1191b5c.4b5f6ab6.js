(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f1191b5c"],{"55ba":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"PageAccountManage"},[n("el-button",{staticStyle:{"margin-bottom":"8px"},attrs:{type:"primary"},on:{click:t.handleAddAccount}},[t._v("添加账号")]),t._v(" "),n("el-table",{attrs:{data:t.list,border:""}},[n("el-table-column",{attrs:{align:"center",prop:"id",label:"工号"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"name",label:"账号"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"role",label:"角色"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.handleEditAccount(e.row)}}},[t._v("修改账号信息")]),t._v(" "),"root"===t.$store.state.user.role?n("el-button",{attrs:{type:"danger",disabled:"root"===e.row.role},on:{click:function(n){return t.handleDeleteAccount(e.row)}}},[t._v("删除账号")]):t._e()]}}])})],1),t._v(" "),n("el-dialog",{attrs:{width:"300px",visible:t.dialogVisible,"close-on-click-modal":!1,"destroy-on-close":!0,title:"add"===t.dialogType?"添加账号":"编辑账号"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{attrs:{model:t.account,"label-width":"80px","label-position":"left"}},[n("el-form-item",{attrs:{label:"账号名"}},[n("el-input",{attrs:{maxlength:"12",placeholder:"账号名"},model:{value:t.account.name,callback:function(e){t.$set(t.account,"name",e)},expression:"account.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"角色"}},[n("el-select",{attrs:{disabled:"root"===t.account.role,placeholder:"请选择角色"},model:{value:t.account.role,callback:function(e){t.$set(t.account,"role",e)},expression:"account.role"}},t._l(t.roleNameList,(function(t,e){return n("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1)],1),t._v(" "),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.confirmAccount}},[t._v("确定")])],1)],1)],1)},c=[],a=(n("96cf"),n("3b8d")),i=n("768b"),l=(n("7f7f"),n("cc5e")),r={name:"PageAccountManage",props:{},data:function(){return{account:{id:"",name:"",role:""},list:[],dialogType:"",dialogVisible:!1,roleList:[]}},computed:{roleNameList:function(){return this.roleList.map((function(t){return t.name})).filter((function(t){return"root"!==t}))}},mounted:function(){this.getAccountRole()},methods:{getAccountRole:function(){var t=this;this.$request([Object(l["e"])(),Object(l["f"])()],(function(e){var n=Object(i["a"])(e,2),o=n[0],c=n[1];t.list=o.list,t.roleList=c.list}))},handleAddAccount:function(){this.account=Object.assign({},{id:"",name:"",role:""}),this.dialogType="add",this.dialogVisible=!0},handleEditAccount:function(t){var e=t.id,n=t.name,o=t.role;this.account=Object.assign({},{id:e,name:n,role:o}),this.dialogType="edit",this.dialogVisible=!0},confirmAccount:function(){var t=this;this.account.name?"add"===this.dialogType?this.$request(Object(l["a"])(this.account),(function(e){t.$notify.success({title:"添加成功",message:"账号名: "+t.account.name}),t.getAccountRole(),t.dialogVisible=!1}),{endStillLoading:!0}):this.$request(Object(l["g"])(this.account),(function(e){t.$notify.success({title:"添加成功",message:"账号名: "+t.account.name}),t.getAccountRole(),t.dialogVisible=!1}),{endStillLoading:!0}):this.$message.info({message:"请设置账户名"})},handleDeleteAccount:function(t){var e=this,n=t.id;this.$confirm("确定要删除当前账号？","确定操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$request(Object(l["c"])({id:n}),(function(t){e.getAccountRole()}),{endStillLoading:!0});case 1:case"end":return t.stop()}}),t)})))).catch((function(t){return t}))}}},u=r,s=(n("cf37"),n("2877")),d=Object(s["a"])(u,o,c,!1,null,"247b063c",null);e["default"]=d.exports},"78e8":function(t,e,n){},cc5e:function(t,e,n){"use strict";n.d(e,"f",(function(){return c})),n.d(e,"d",(function(){return a})),n.d(e,"b",(function(){return i})),n.d(e,"h",(function(){return l})),n.d(e,"e",(function(){return r})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return s})),n.d(e,"g",(function(){return d}));var o=n("b775"),c=function(t){return Object(o["a"])({url:"/role/all",method:"get",params:t})},a=function(t){return Object(o["a"])({url:"/role/del",method:"get",params:t})},i=function(t){return Object(o["a"])({url:"/role/add",method:"post",data:t})},l=function(t){return Object(o["a"])({url:"/role/update",method:"post",data:t})},r=function(t){return Object(o["a"])({url:"/account/all",method:"get",params:t})},u=function(t){return Object(o["a"])({url:"/account/del",method:"get",params:t})},s=function(t){return Object(o["a"])({url:"/account/add",method:"post",data:t})},d=function(t){return Object(o["a"])({url:"/account/update",method:"post",data:t})}},cf37:function(t,e,n){"use strict";var o=n("78e8"),c=n.n(o);c.a}}]);